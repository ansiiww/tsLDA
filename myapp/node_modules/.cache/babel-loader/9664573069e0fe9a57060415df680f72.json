{"ast":null,"code":"import './App.css';\nimport './funcs/processing.js';\nimport './funcs/processVars.js';\nimport './funcs/correlationVars.js';\nimport './funcs/correlation.js';\nimport './funcs/d3.min.js';\nimport './funcs/display';\nimport './funcs/displayVars';\nimport './funcs/docsUp';\nimport './funcs/docsUpVar';\nimport './funcs/downloads';\nimport './funcs/downloadsVars';\nimport './funcs/stoplist';\nimport './funcs/stoplistVars';\nimport './funcs/sweep';\nimport './funcs/sweepVars';\nimport './funcs/topicDocuments';\nimport './funcs/topictime';\nimport './funcs/topictimeVars';\nimport './funcs/topidDocVars';\nimport './funcs/vocab';\nimport './funcs/vocabVars'; // used by ready, changeNumTopics in processing\n\nfunction createTimeSVGs() {\n  var tsPage = d3.select(\"#ts-page\"); // Restart the visualizations\n\n  tsPage.select(\"svg\").remove();\n  topicTimeGroups = [];\n  var tsSVG = tsPage.append(\"svg\").attr(\"height\", timeSeriesHeight * numTopics).attr(\"width\", timeSeriesWidth);\n\n  for (var topic = 0; topic < numTopics; topic++) {\n    topicTimeGroups.push(tsSVG.append(\"g\").attr(\"transform\", \"translate(0,\" + timeSeriesHeight * topic + \")\"));\n    topicTimeGroups[topic].append(\"path\").style(\"fill\", \"#ccc\").style(\"stroke\", \"#fff\");\n    topicTimeGroups[topic].append(\"text\").attr(\"y\", 40);\n  }\n} // used by sweeep in sweep, changeNumTopics in processing\n\n\nfunction timeSeries() {\n  var tsPage = d3.select(\"#ts-page\");\n\n  for (var topic = 0; topic < numTopics; topic++) {\n    var topicProportions = documents.map(function (d) {\n      return {\n        date: d.date,\n        p: d.topicCounts[topic] / d.tokens.length\n      };\n    });\n    var topicMeans = d3.nest().key(function (d) {\n      return d.date;\n    }).rollup(function (d) {\n      return d3.mean(d, function (x) {\n        return x.p;\n      });\n    }).entries(topicProportions);\n    var xScale = d3.scaleLinear().domain([0, topicMeans.length]).range([0, timeSeriesWidth]);\n    var yScale = d3.scaleLinear().domain([0, 0.2]).range([timeSeriesHeight, 0]);\n    var area = d3.area().x(function (d, i) {\n      return xScale(i);\n    }).y1(function (d) {\n      return yScale(d.value);\n    }).y0(yScale(0));\n    topicTimeGroups[topic].select(\"path\").attr(\"d\", area(topicMeans));\n    topicTimeGroups[topic].select(\"text\").text(topNWords(topicWordCounts[topic], 3));\n  }\n}","map":{"version":3,"sources":["/Users/tatsukikuze12/Desktop/PastClasses/SummerResearch/jsLDAcopy/myapp/src/funcs/topictime.js"],"names":["createTimeSVGs","tsPage","d3","select","remove","topicTimeGroups","tsSVG","append","attr","timeSeriesHeight","numTopics","timeSeriesWidth","topic","push","style","timeSeries","topicProportions","documents","map","d","date","p","topicCounts","tokens","length","topicMeans","nest","key","rollup","mean","x","entries","xScale","scaleLinear","domain","range","yScale","area","i","y1","value","y0","text","topNWords","topicWordCounts"],"mappings":"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","sourcesContent":["import './App.css';\nimport './funcs/processing.js'\nimport './funcs/processVars.js'\nimport './funcs/correlationVars.js'\nimport './funcs/correlation.js'\nimport './funcs/d3.min.js'\nimport './funcs/display'\nimport './funcs/displayVars'\nimport './funcs/docsUp'\nimport './funcs/docsUpVar'\nimport './funcs/downloads'\nimport './funcs/downloadsVars'\nimport './funcs/stoplist'\nimport './funcs/stoplistVars'\nimport './funcs/sweep'\nimport './funcs/sweepVars'\nimport './funcs/topicDocuments'\nimport './funcs/topictime'\nimport './funcs/topictimeVars'\nimport './funcs/topidDocVars'\nimport './funcs/vocab'\nimport './funcs/vocabVars'\n\n\n\n\n// used by ready, changeNumTopics in processing\nfunction createTimeSVGs () {\n    var tsPage = d3.select(\"#ts-page\");\n    // Restart the visualizations\n    tsPage.select(\"svg\").remove();\n    topicTimeGroups = [];\n    \n    var tsSVG = tsPage.append(\"svg\").attr(\"height\", timeSeriesHeight * numTopics).attr(\"width\", timeSeriesWidth);\n  \n    for (var topic = 0; topic < numTopics; topic++) {\n      topicTimeGroups.push(tsSVG.append(\"g\").attr(\"transform\", \"translate(0,\" + (timeSeriesHeight * topic) + \")\"));\n      topicTimeGroups[topic].append(\"path\").style(\"fill\", \"#ccc\").style(\"stroke\", \"#fff\");\n      topicTimeGroups[topic].append(\"text\").attr(\"y\", 40);\n    }\n  \n  }\n// used by sweeep in sweep, changeNumTopics in processing\nfunction timeSeries() {\n    var tsPage = d3.select(\"#ts-page\");\n  \n    for (var topic = 0; topic < numTopics; topic++) {\n      var topicProportions = documents.map(function (d) { return {date: d.date, p: d.topicCounts[topic] / d.tokens.length}; })\n      var topicMeans = d3.nest().key(function (d) {return d.date; }).rollup(function (d) {return d3.mean(d, function (x) {return x.p}); }).entries(topicProportions);\n  \n      var xScale = d3.scaleLinear().domain([0, topicMeans.length]).range([0, timeSeriesWidth]);\n      var yScale = d3.scaleLinear().domain([0, 0.2]).range([timeSeriesHeight, 0]);\n      var area = d3.area()\n      .x(function (d, i) { return xScale(i); })\n      .y1(function (d) { return yScale(d.value); })\n      .y0(yScale(0));\n  \n      topicTimeGroups[topic].select(\"path\").attr(\"d\", area(topicMeans));\n      topicTimeGroups[topic].select(\"text\").text(topNWords(topicWordCounts[topic], 3))\n    }\n  \n  }"]},"metadata":{},"sourceType":"module"}