{"ast":null,"code":"import './App.css';\nimport './funcs/processing.js';\nimport './funcs/processVars.js';\nimport './funcs/correlationVars.js';\nimport './funcs/correlation.js';\nimport './funcs/d3.min.js';\nimport './funcs/display';\nimport './funcs/displayVars';\nimport './funcs/docsUp';\nimport './funcs/docsUpVar';\nimport './funcs/downloads';\nimport './funcs/downloadsVars';\nimport './funcs/stoplist';\nimport './funcs/stoplistVars';\nimport './funcs/sweep';\nimport './funcs/sweepVars';\nimport './funcs/topicDocuments';\nimport './funcs/topictime';\nimport './funcs/topictimeVars';\nimport './funcs/topidDocVars';\nimport './funcs/vocab';\nimport './funcs/vocabVars';\nd3.select(\"#dl-tab\").on(\"click\", function () {\n  d3.selectAll(\".page\").style(\"display\", \"none\");\n  d3.selectAll(\"ul li\").attr(\"class\", \"\");\n  d3.select(\"#dl-page\").style(\"display\", \"block\");\n  d3.select(\"#dl-tab\").attr(\"class\", \"selected\");\n}); // Functions for download links\n\nfunction toURL(s, type) {\n  // Chrome will not process data URIs larger than 2M\n  if (s.length < 1500000) {\n    return \"data:Content-type:\" + type + \";charset=UTF-8,\" + encodeURIComponent(s);\n  } else {\n    var blob = new Blob([s], {\n      type: type\n    });\n    return window.URL.createObjectURL(blob);\n  }\n}\n\nfunction saveDocTopics() {\n  var docTopicsCSV = \"\";\n  var topicProbabilities = zeros(numTopics);\n  documents.forEach(function (d, i) {\n    docTopicsCSV += d.id + \",\" + d.topicCounts.map(function (x) {\n      return eightDigits(x / d.tokens.length);\n    }).join(\",\") + \"\\n\";\n  });\n  d3.select(\"#doctopics-dl\").attr(\"href\", toURL(docTopicsCSV, \"text/csv\"));\n}\n\nfunction saveTopicWords() {\n  var topicWordsCSV = \"word,\" + d3.range(0, numTopics).map(function (t) {\n    return \"topic\" + t;\n  }).join(\",\") + \"\\n\";\n\n  for (var word in wordTopicCounts) {\n    var topicProbabilities = zeros(numTopics);\n\n    for (var topic in wordTopicCounts[word]) {\n      topicProbabilities[topic] = eightDigits(wordTopicCounts[word][topic] / tokensPerTopic[topic]);\n    }\n\n    topicWordsCSV += word + \",\" + topicProbabilities.join(\",\") + \"\\n\";\n  }\n\n  d3.select(\"#topicwords-dl\").attr(\"href\", toURL(topicWordsCSV, \"text/csv\"));\n}\n\nfunction saveTopicKeys() {\n  var keysCSV = \"Topic,TokenCount,Words\\n\";\n\n  if (topicWordCounts.length == 0) {\n    sortTopicWords();\n  }\n\n  for (var topic = 0; topic < numTopics; topic++) {\n    keysCSV += topic + \",\" + tokensPerTopic[topic] + \",\\\"\" + topNWords(topicWordCounts[topic], 10) + \"\\\"\\n\";\n  }\n\n  d3.select(\"#keys-dl\").attr(\"href\", toURL(keysCSV, \"text/csv\"));\n}\n\nfunction saveTopicPMI() {\n  var pmiCSV = \"\";\n  var matrix = getTopicCorrelations();\n  matrix.forEach(function (row) {\n    pmiCSV += row.map(function (x) {\n      return eightDigits(x);\n    }).join(\",\") + \"\\n\";\n  });\n  d3.select(\"#topictopic-dl\").attr(\"href\", toURL(pmiCSV, \"text/csv\"));\n}\n\nfunction saveGraph() {\n  var graphCSV = \"Source,Target,Weight,Type\\n\";\n  var topicProbabilities = zeros(numTopics);\n  documents.forEach(function (d, i) {\n    d.topicCounts.forEach(function (x, topic) {\n      if (x > 0.0) {\n        graphCSV += d.id + \",\" + topic + \",\" + eightDigits(x / d.tokens.length) + \",undirected\\n\";\n      }\n    });\n  });\n  d3.select(\"#graph-dl\").attr(\"href\", toURL(graphCSV, \"text/csv\"));\n}\n\nfunction saveState() {\n  var state = \"DocID,Word,Topic\";\n  documents.forEach(function (d, docID) {\n    d.tokens.forEach(function (token, position) {\n      if (!token.isStopword) {\n        state += docID + \",\\\"\" + token.word + \"\\\",\" + token.topic + \"\\n\";\n      }\n    });\n  });\n  d3.select(\"#state-dl\").attr(\"href\", toURL(state, \"text/csv\"));\n}","map":{"version":3,"sources":["/Users/tatsukikuze12/Desktop/PastClasses/SummerResearch/jsLDAcopy/myapp/src/funcs/downloads.js"],"names":["d3","select","on","selectAll","style","attr","toURL","s","type","length","encodeURIComponent","blob","Blob","window","URL","createObjectURL","saveDocTopics","docTopicsCSV","topicProbabilities","zeros","numTopics","documents","forEach","d","i","id","topicCounts","map","x","eightDigits","tokens","join","saveTopicWords","topicWordsCSV","range","t","word","wordTopicCounts","topic","tokensPerTopic","saveTopicKeys","keysCSV","topicWordCounts","sortTopicWords","topNWords","saveTopicPMI","pmiCSV","matrix","getTopicCorrelations","row","saveGraph","graphCSV","saveState","state","docID","token","position","isStopword"],"mappings":"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","sourcesContent":["import './App.css';\nimport './funcs/processing.js'\nimport './funcs/processVars.js'\nimport './funcs/correlationVars.js'\nimport './funcs/correlation.js'\nimport './funcs/d3.min.js'\nimport './funcs/display'\nimport './funcs/displayVars'\nimport './funcs/docsUp'\nimport './funcs/docsUpVar'\nimport './funcs/downloads'\nimport './funcs/downloadsVars'\nimport './funcs/stoplist'\nimport './funcs/stoplistVars'\nimport './funcs/sweep'\nimport './funcs/sweepVars'\nimport './funcs/topicDocuments'\nimport './funcs/topictime'\nimport './funcs/topictimeVars'\nimport './funcs/topidDocVars'\nimport './funcs/vocab'\nimport './funcs/vocabVars'\n\n\n\n\nd3.select(\"#dl-tab\").on(\"click\", function() {\n  d3.selectAll(\".page\").style(\"display\", \"none\");\n  d3.selectAll(\"ul li\").attr(\"class\", \"\");\n  d3.select(\"#dl-page\").style(\"display\", \"block\");\n  d3.select(\"#dl-tab\").attr(\"class\", \"selected\");\n});\n\n// Functions for download links\nfunction toURL(s, type) {\n    // Chrome will not process data URIs larger than 2M\n    if (s.length < 1500000) {\n      return \"data:Content-type:\" + type + \";charset=UTF-8,\" + encodeURIComponent(s);\n    }\n    else {\n      var blob = new Blob([s], {type: type});\n      return window.URL.createObjectURL(blob);\n    }\n  }\n  \nfunction saveDocTopics() {\n    var docTopicsCSV = \"\";\n    var topicProbabilities = zeros(numTopics);\n  \n    documents.forEach(function(d, i) {\n    docTopicsCSV += d.id + \",\" + d.topicCounts.map(function (x) { return eightDigits(x / d.tokens.length); }).join(\",\") + \"\\n\";\n});\n  \n    d3.select(\"#doctopics-dl\").attr(\"href\", toURL(docTopicsCSV, \"text/csv\"));\n  }\n  \nfunction saveTopicWords() {\n    var topicWordsCSV = \"word,\" + d3.range(0, numTopics).map(function(t) {return \"topic\" + t; } ).join(\",\") + \"\\n\";\n      for (var word in wordTopicCounts) {\n        var topicProbabilities = zeros(numTopics);\n        for (var topic in wordTopicCounts[word]) {\n          topicProbabilities[topic] = eightDigits(wordTopicCounts[word][topic] / tokensPerTopic[topic]);\n        }\n      topicWordsCSV += word + \",\" + topicProbabilities.join(\",\") + \"\\n\";\n      }\n  \n    d3.select(\"#topicwords-dl\").attr(\"href\", toURL(topicWordsCSV, \"text/csv\"));\n  }\n  \nfunction saveTopicKeys() {\n    var keysCSV = \"Topic,TokenCount,Words\\n\";\n  \n    if (topicWordCounts.length == 0) { sortTopicWords(); }\n  \n      for (var topic = 0; topic < numTopics; topic++) {\n      keysCSV += topic + \",\" + tokensPerTopic[topic] + \",\\\"\" + topNWords(topicWordCounts[topic], 10) + \"\\\"\\n\";\n      }\n  \n    d3.select(\"#keys-dl\").attr(\"href\", toURL(keysCSV, \"text/csv\"));\n  }\n  \nfunction saveTopicPMI() {\n    var pmiCSV = \"\";\n    var matrix = getTopicCorrelations();\n  \n      matrix.forEach(function(row) { pmiCSV += row.map(function (x) { return eightDigits(x); }).join(\",\") + \"\\n\"; });\n  \n    d3.select(\"#topictopic-dl\").attr(\"href\", toURL(pmiCSV, \"text/csv\"));\n  }\n  \nfunction saveGraph() {\n    var graphCSV = \"Source,Target,Weight,Type\\n\";\n      var topicProbabilities = zeros(numTopics);\n  \n      documents.forEach(function(d, i) {\n      d.topicCounts.forEach(function(x, topic) {\n        if (x > 0.0) {\n          graphCSV += d.id + \",\" + topic + \",\" + eightDigits(x / d.tokens.length) + \",undirected\\n\";\n        }\n      });\n    });\n  \n    d3.select(\"#graph-dl\").attr(\"href\", toURL(graphCSV, \"text/csv\"));\n  }\n  \nfunction saveState() {\n    var state = \"DocID,Word,Topic\";\n    documents.forEach(function(d, docID) {\n      d.tokens.forEach(function(token, position) {\n        if (! token.isStopword) {\n          state += docID + \",\\\"\" + token.word + \"\\\",\" + token.topic + \"\\n\";\n        }\n      });\n    });\n  \n    d3.select(\"#state-dl\").attr(\"href\", toURL(state, \"text/csv\"));\n  }\n"]},"metadata":{},"sourceType":"module"}