{"ast":null,"code":"var _jsxFileName = \"/Users/tatsukikuze12/Desktop/PastClasses/SummerResearch/jsLDAcopy/myapp/src/App.js\";\nimport React, { Component } from 'react';\nimport { render } from \"react-dom\";\nimport './App.css';\nimport * as d3 from 'd3';\nimport { findNumTopics, zeros } from './funcs/process';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      // Vocabulary statistics\n      // Needed by reset & parseline\n      vocabularySize: 0,\n      // needed by reset & parseline, changeNumTopics\n      vocabularyCounts: {},\n      //needed by reset\n      displayingStopwords: false,\n      sortVocabByTopic: false,\n      specificityScale: d3.scaleLinear().domain([0, 1]).range([\"#ffffff\", \"#99d8c9\"]),\n      // Topic model parameters\n      // needed by reset & sortTopicWords, changeNumTopics\n      numTopics: 0,\n      // run findNumTopics upon mount\n      // required by reset & ready & parseline\n      stopwords: {},\n      // required by reset, changeNumTopics\n      completeSweeps: 0,\n      requestedSweeps: 0,\n      // in reset, changeNumTopics\n      selectedTopic: -1,\n      // Needed by reset & parseline & sortTopicWords, changeNumTopics\n      wordTopicCounts: {},\n      // Needed by reset & sortTopicWords, changeNumTopics\n      topicWordCounts: [],\n      // Needed by reset & parseline, changeNumTopics\n      tokensPerTopic: [],\n      // set to zeros(numTopics)\n      // in reset, changeNumTopics\n      topicWeights: [],\n      // set to zeros(numTopics)\n      // used by reset & parseline, changeNumTopics\n      documents: [],\n      // used by sortTopicWords\n      byCountDescending: function (a, b) {\n        return b.count - a.count;\n      },\n      // used by parseLine\n      truncate: function (s) {\n        return s.length > 300 ? s.substring(0, 299) + \"...\" : s;\n      },\n      wordPattern: XRegExp(\"\\\\p{L}[\\\\p{L}\\\\p{P}]*\\\\p{L}\", \"g\")\n    };\n  }\n\n  componentDidMount() {\n    findNumTopics(); // Set upon initialisation, changed to new numTopics in reset\n\n    d3.select(\"#num-topics-input\").attr(\"value\", numTopics);\n    tokensPerTopic = zeros(numTopics), topicWeights = zeros(numTopics), // used by parseLine\n    d3.select(\"#docs-tab\").on(\"click\", function () {\n      d3.selectAll(\".page\").style(\"display\", \"none\");\n      d3.selectAll(\"ul li\").attr(\"class\", \"\");\n      d3.select(\"#docs-page\").style(\"display\", \"block\");\n      d3.select(\"#docs-tab\").attr(\"class\", \"selected\");\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      id: \"app\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"tooltip\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"main\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"form\",\n      class: \"top\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      id: \"sweep\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, \"Run 50 iterations\"), \"Iterations: \", /*#__PURE__*/React.createElement(\"span\", {\n      id: \"iters\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }\n    }, \"0\"), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"num_topics_control\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, \"Train with \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"num-topics-input\",\n      type: \"range\",\n      name: \"topics\",\n      value: \"25\",\n      min: \"3\",\n      max: \"100\",\n      oninput: \"updateTopicCount(this)\",\n      onchange: \"onTopicsChange(this)\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 48\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      id: \"num_topics_display\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 200\n      }\n    }, \"25\"), \" topics\")), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"sidebar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"topics\",\n      class: \"sidebox\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"tabwrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"tabs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      id: \"docs-tab\",\n      class: \"selected\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, \"Topic Documents\"), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"corr-tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    }, \"Topic Correlations\"), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"ts-tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, \"Time Series\"), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"dl-tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }\n    }, \"Downloads\"), /*#__PURE__*/React.createElement(\"li\", {\n      id: \"vocab-tab\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 7\n      }\n    }, \"Vocabulary\"))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"pages\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"docs-page\",\n      class: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"upload\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: \"event.preventDefault(); queueLoad();\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, \"Use a different collection:\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }\n    }, \"Documents \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"docs-file-input\",\n      type: \"file\",\n      onchange: \"onDocumentFileChange(this)\",\n      size: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 26\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 11\n      }\n    }, \"Stoplist  \", /*#__PURE__*/React.createElement(\"input\", {\n      id: \"stops-file-input\",\n      type: \"file\",\n      onchange: \"onStopwordFileChange(this)\",\n      size: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 26\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      id: \"load-inputs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 16\n      }\n    }, \"Upload\")))), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"help\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    }, \"Documents are sorted by their proportion of the currently selected topic, biased to prefer longer documents.\")), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"vocab-page\",\n      class: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"help\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }\n    }, \"Words occurring in only one topic have specificity 1.0, words evenly distributed among all topics have specificity 0.0. \", /*#__PURE__*/React.createElement(\"button\", {\n      id: \"showStops\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 147\n      }\n    }, \"Show stopwords\"), /*#__PURE__*/React.createElement(\"button\", {\n      id: \"sortVocabByTopic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }\n    }, \"Sort by topic\")), /*#__PURE__*/React.createElement(\"table\", {\n      id: \"vocab-table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 14\n      }\n    }, \"Word\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 27\n      }\n    }, \"Frequency\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 45\n      }\n    }, \"Topic Specificity\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 71\n      }\n    }, \"Stoplist\")), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 7\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"ts-page\",\n      class: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"help\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, \"Documents are grouped by their \\\"date\\\" field (the second column in the input file). These plots show the average document proportion of each topic at each date value. Date values are \", /*#__PURE__*/React.createElement(\"i\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 209\n      }\n    }, \"not\"), \" parsed, but simply sorted in the order they appear in the input file.\"), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"help\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"corr-page\",\n      class: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"help\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }\n    }, \"Topics that occur together more than expected are blue, topics that occur together less than expected are red.\")), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"dl-page\",\n      class: \"page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      class: \"help\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }\n    }, \"Each file is in comma-separated format.\"), /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      id: \"doctopics-dl\",\n      href: \"javascript:;\",\n      download: \"doctopics.csv\",\n      onclick: \"saveDocTopics()\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 13\n      }\n    }, \"Document topics\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      id: \"topicwords-dl\",\n      href: \"javascript:;\",\n      download: \"topicwords.csv\",\n      onclick: \"saveTopicWords()\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, \"Topic words\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      id: \"keys-dl\",\n      href: \"javascript:;\",\n      download: \"keys.csv\",\n      onclick: \"saveTopicKeys()\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, \"Topic summaries\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      id: \"topictopic-dl\",\n      href: \"javascript:;\",\n      download: \"topictopic.csv\",\n      onclick: \"saveTopicPMI()\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 13\n      }\n    }, \"Topic-topic connections\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      id: \"graph-dl\",\n      href: \"javascript:;\",\n      download: \"gephi.csv\",\n      onclick: \"saveGraph()\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, \"Doc-topic graph file (for Gephi)\")), /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      id: \"state-dl\",\n      href: \"javascript:;\",\n      download: \"state.csv\",\n      onclick: \"saveState()\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, \"Complete sampling state\"))))))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/tatsukikuze12/Desktop/PastClasses/SummerResearch/jsLDAcopy/myapp/src/App.js"],"names":["React","Component","render","d3","findNumTopics","zeros","App","state","vocabularySize","vocabularyCounts","displayingStopwords","sortVocabByTopic","specificityScale","scaleLinear","domain","range","numTopics","stopwords","completeSweeps","requestedSweeps","selectedTopic","wordTopicCounts","topicWordCounts","tokensPerTopic","topicWeights","documents","byCountDescending","a","b","count","truncate","s","length","substring","wordPattern","XRegExp","componentDidMount","select","attr","on","selectAll","style"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { render } from \"react-dom\"\nimport './App.css';\nimport * as d3 from 'd3'\nimport { findNumTopics, zeros } from './funcs/process'\n\n\nclass App extends Component {\n  state = {\n    // Vocabulary statistics\n\n    // Needed by reset & parseline\n    vocabularySize: 0,\n\n    // needed by reset & parseline, changeNumTopics\n    vocabularyCounts: {},\n\n    //needed by reset\n    displayingStopwords: false,\n    sortVocabByTopic: false,\n    specificityScale: d3.scaleLinear().domain([0,1]).range([\"#ffffff\", \"#99d8c9\"]),\n\n    // Topic model parameters\n\n    // needed by reset & sortTopicWords, changeNumTopics\n    numTopics: 0, // run findNumTopics upon mount\n\n    // required by reset & ready & parseline\n    stopwords: {},\n\n    // required by reset, changeNumTopics\n    completeSweeps: 0,\n    requestedSweeps: 0,\n\n    // in reset, changeNumTopics\n    selectedTopic: -1,\n\n    // Needed by reset & parseline & sortTopicWords, changeNumTopics\n    wordTopicCounts: {},\n\n    // Needed by reset & sortTopicWords, changeNumTopics\n    topicWordCounts: [],\n\n    // Needed by reset & parseline, changeNumTopics\n    tokensPerTopic: [], // set to zeros(numTopics)\n\n    // in reset, changeNumTopics\n    topicWeights: [], // set to zeros(numTopics)\n\n    // used by reset & parseline, changeNumTopics\n    documents: [],\n\n    // used by sortTopicWords\n    byCountDescending: function (a,b) { return b.count - a.count; },\n\n    // used by parseLine\n    truncate: function(s) { return s.length > 300 ? s.substring(0, 299) + \"...\" : s; },\n    wordPattern: XRegExp(\"\\\\p{L}[\\\\p{L}\\\\p{P}]*\\\\p{L}\", \"g\"),\n  };\n\n  componentDidMount() {\n    findNumTopics()\n    // Set upon initialisation, changed to new numTopics in reset\n    d3.select(\"#num-topics-input\").attr(\"value\", numTopics);\n  \n    tokensPerTopic = zeros(numTopics),\n    topicWeights =  zeros(numTopics),\n    \n\n    // used by parseLine\n    d3.select(\"#docs-tab\").on(\"click\", function() {\n      d3.selectAll(\".page\").style(\"display\", \"none\");\n      d3.selectAll(\"ul li\").attr(\"class\", \"\");\n      d3.select(\"#docs-page\").style(\"display\", \"block\");\n      d3.select(\"#docs-tab\").attr(\"class\", \"selected\");\n    });\n  }\n  \n  render() {\n    return (\n      <div id=\"app\">\n      <div id=\"tooltip\"></div>\n\n      <div id=\"main\">\n      <div id=\"form\" class=\"top\">\n        <button id=\"sweep\">Run 50 iterations</button>\n        Iterations: <span id=\"iters\">0</span>\n\n      <span id=\"num_topics_control\">Train with <input id=\"num-topics-input\" type=\"range\" name=\"topics\" value=\"25\" min=\"3\" max=\"100\" oninput=\"updateTopicCount(this)\" onchange=\"onTopicsChange(this)\"/> <span id=\"num_topics_display\">25</span> topics</span>\n      </div>\n\n      <div class=\"sidebar\">\n\n      <div id=\"topics\" class=\"sidebox\">\n      </div>\n\n      </div>\n\n      <div id=\"tabwrapper\">\n      <div class=\"tabs\">\n      <ul>\n      <li id=\"docs-tab\" class=\"selected\">Topic Documents</li>\n      <li id=\"corr-tab\">Topic Correlations</li>\n      <li id=\"ts-tab\">Time Series</li>\n\n      <li id=\"dl-tab\">Downloads</li>\n      <li id=\"vocab-tab\">Vocabulary</li>\n      </ul>\n      </div>\n      <div id=\"pages\">\n\n      <div id=\"docs-page\" class=\"page\">\n        <div class=\"upload\">\n        <form onSubmit=\"event.preventDefault(); queueLoad();\">\n          <div>Use a different collection:</div>\n          <div>Documents <input id=\"docs-file-input\" type=\"file\" onchange=\"onDocumentFileChange(this)\" size=\"10\"/></div>\n          <div>Stoplist  <input id=\"stops-file-input\" type=\"file\" onchange=\"onStopwordFileChange(this)\" size=\"10\"/></div>\n          <div><button id=\"load-inputs\">Upload</button></div>\n        </form>\n        </div>\n        <div class=\"help\">Documents are sorted by their proportion of the currently selected topic, biased to prefer longer documents.</div>\n        \n      </div>\n\n      <div id=\"vocab-page\" class=\"page\">\n        <div class=\"help\">Words occurring in only one topic have specificity 1.0, words evenly distributed among all topics have specificity 0.0. <button id=\"showStops\">Show stopwords</button>\n      <button id=\"sortVocabByTopic\">Sort by topic</button>\n        </div>\n      <table id=\"vocab-table\">\n      <thead><th>Word</th><th>Frequency</th><th>Topic Specificity</th><th>Stoplist</th></thead>\n      <tbody></tbody>\n      </table>\n      </div>\n\n      <div id=\"ts-page\" class=\"page\">\n        <div class=\"help\">Documents are grouped by their \"date\" field (the second column in the input file). These plots show the average document proportion of each topic at each date value. Date values are <i>not</i> parsed, but simply sorted in the order they appear in the input file.</div>\n        <div class=\"help\"></div>\n      </div>\n\n      <div id=\"corr-page\" class=\"page\">\n        <div class=\"help\">Topics that occur together more than expected are blue, topics that occur together less than expected are red.</div>\n      </div>\n\n      <div id=\"dl-page\" class=\"page\">\n        <div class=\"help\">Each file is in comma-separated format.</div>\n        <ul>\n        <li><a id=\"doctopics-dl\" href=\"javascript:;\" download=\"doctopics.csv\" onclick=\"saveDocTopics()\">Document topics</a></li>\n        <li><a id=\"topicwords-dl\" href=\"javascript:;\" download=\"topicwords.csv\" onclick=\"saveTopicWords()\">Topic words</a></li>\n        <li><a id=\"keys-dl\" href=\"javascript:;\" download=\"keys.csv\" onclick=\"saveTopicKeys()\">Topic summaries</a></li>\n        <li><a id=\"topictopic-dl\" href=\"javascript:;\" download=\"topictopic.csv\" onclick=\"saveTopicPMI()\">Topic-topic connections</a></li>\n        <li><a id=\"graph-dl\" href=\"javascript:;\" download=\"gephi.csv\" onclick=\"saveGraph()\">Doc-topic graph file (for Gephi)</a></li>\n        <li><a id=\"state-dl\" href=\"javascript:;\" download=\"state.csv\" onclick=\"saveState()\">Complete sampling state</a></li>\n        </ul>\n      </div>\n\n      </div>\n      </div>\n      </div>\n      </div>\n    );\n  };\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}