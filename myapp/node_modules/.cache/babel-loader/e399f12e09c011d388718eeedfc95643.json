{"ast":null,"code":"import './App.css';\nimport './funcs/processing.js';\nimport './funcs/processVars.js';\nimport './funcs/correlationVars.js';\nimport './funcs/correlation.js';\nimport './funcs/d3.min.js';\nimport './funcs/display';\nimport './funcs/displayVars';\nimport './funcs/docsUp';\nimport './funcs/docsUpVar';\nimport './funcs/downloads';\nimport './funcs/downloadsVars';\nimport './funcs/stoplist';\nimport './funcs/stoplistVars';\nimport './funcs/sweep';\nimport './funcs/sweepVars';\nimport './funcs/topicDocuments';\nimport './funcs/topictime';\nimport './funcs/topictimeVars';\nimport './funcs/topidDocVars';\nimport './funcs/vocab';\nimport './funcs/vocabVars'; // Used by displayTopicWords in display\n\nfunction toggleTopicDocuments(topic) {\n  if (topic === selectedTopic) {\n    // unselect the topic\n    d3.selectAll(\"div.topicwords\").attr(\"class\", \"topicwords\");\n    selectedTopic = -1;\n    sortVocabByTopic = false;\n    d3.select(\"#sortVocabByTopic\").text(\"Sort by topic\");\n  } else {\n    d3.selectAll(\"div.topicwords\").attr(\"class\", function (d, i) {\n      return i === topic ? \"topicwords selected\" : \"topicwords\";\n    });\n    selectedTopic = topic;\n  }\n\n  reorderDocuments();\n  vocabTable();\n} // used by addStop, removeStop in vocab, sweep in sweep, changeNumTopics in processing\n\n\nfunction reorderDocuments() {\n  var format = d3.format(\".2g\");\n\n  if (selectedTopic === -1) {\n    documents.sort(function (a, b) {\n      return d3.ascending(a.originalOrder, b.originalOrder);\n    });\n    d3.selectAll(\"div.document\").data(documents).style(\"display\", \"block\").text(function (d) {\n      return \"[\" + d.id + \"] \" + truncate(d.originalText);\n    });\n  } else {\n    var scores = documents.map(function (doc, i) {\n      return {\n        docID: i,\n        score: (doc.topicCounts[selectedTopic] + docSortSmoothing) / (doc.tokens.length + sumDocSortSmoothing)\n      };\n    });\n    scores.sort(function (a, b) {\n      return b.score - a.score;\n    });\n    /*documents.sort(function(a, b) {\n        var score1 = (a.topicCounts[selectedTopic] + docSortSmoothing) / (a.tokens.length + sumDocSortSmoothing);\n        var score2 = (b.topicCounts[selectedTopic] + docSortSmoothing) / (b.tokens.length + sumDocSortSmoothing);\n        return d3.descending(score1, score2);\n    }); */\n\n    d3.selectAll(\"div.document\").data(scores).style(\"display\", function (d) {\n      return documents[d.docID].topicCounts[selectedTopic] > 0 ? \"block\" : \"none\";\n    }).text(function (d) {\n      return \"[\" + documents[d.docID].id + \"/\" + format(d.score * 100) + \"%] \" + truncate(documents[d.docID].originalText);\n    });\n  }\n}","map":{"version":3,"sources":["/Users/tatsukikuze12/Desktop/PastClasses/SummerResearch/jsLDAcopy/myapp/src/funcs/topicDocuments.js"],"names":["toggleTopicDocuments","topic","selectedTopic","d3","selectAll","attr","sortVocabByTopic","select","text","d","i","reorderDocuments","vocabTable","format","documents","sort","a","b","ascending","originalOrder","data","style","id","truncate","originalText","scores","map","doc","docID","score","topicCounts","docSortSmoothing","tokens","length","sumDocSortSmoothing"],"mappings":"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","sourcesContent":["import './App.css';\nimport './funcs/processing.js'\nimport './funcs/processVars.js'\nimport './funcs/correlationVars.js'\nimport './funcs/correlation.js'\nimport './funcs/d3.min.js'\nimport './funcs/display'\nimport './funcs/displayVars'\nimport './funcs/docsUp'\nimport './funcs/docsUpVar'\nimport './funcs/downloads'\nimport './funcs/downloadsVars'\nimport './funcs/stoplist'\nimport './funcs/stoplistVars'\nimport './funcs/sweep'\nimport './funcs/sweepVars'\nimport './funcs/topicDocuments'\nimport './funcs/topictime'\nimport './funcs/topictimeVars'\nimport './funcs/topidDocVars'\nimport './funcs/vocab'\nimport './funcs/vocabVars'\n\n\n\n\n// Used by displayTopicWords in display\nfunction toggleTopicDocuments(topic) {\n    if (topic === selectedTopic) {\n      // unselect the topic\n      d3.selectAll(\"div.topicwords\").attr(\"class\", \"topicwords\");\n      selectedTopic = -1;\n  \n    sortVocabByTopic = false;\n    d3.select(\"#sortVocabByTopic\").text(\"Sort by topic\")\n    }\n    else {\n      d3.selectAll(\"div.topicwords\").attr(\"class\", function(d, i) { return i === topic ? \"topicwords selected\" : \"topicwords\"; });\n      selectedTopic = topic;\n    }\n    reorderDocuments();\n    vocabTable();\n  }\n\n// used by addStop, removeStop in vocab, sweep in sweep, changeNumTopics in processing\nfunction reorderDocuments() {\n    var format = d3.format(\".2g\");\n  \n    if (selectedTopic === -1) {\n      documents.sort(function(a, b) { return d3.ascending(a.originalOrder, b.originalOrder); });\n      d3.selectAll(\"div.document\").data(documents)\n      .style(\"display\", \"block\")\n      .text(function(d) { return \"[\" + d.id + \"] \" + truncate(d.originalText); });\n    }\n    else {\n      var scores = documents.map(function (doc, i) {\n        return {docID: i, score: (doc.topicCounts[selectedTopic] + docSortSmoothing) / (doc.tokens.length + sumDocSortSmoothing)};\n      });\n      scores.sort(function(a, b) {\n        return b.score - a.score;\n      });\n      /*documents.sort(function(a, b) {\n          var score1 = (a.topicCounts[selectedTopic] + docSortSmoothing) / (a.tokens.length + sumDocSortSmoothing);\n          var score2 = (b.topicCounts[selectedTopic] + docSortSmoothing) / (b.tokens.length + sumDocSortSmoothing);\n          return d3.descending(score1, score2);\n      }); */\n      d3.selectAll(\"div.document\").data(scores)\n        .style(\"display\", function(d) { return documents[d.docID].topicCounts[selectedTopic] > 0 ? \"block\" : \"none\"; })\n        .text(function(d) { return \"[\" + documents[d.docID].id + \"/\" + format(d.score * 100) + \"%] \" + truncate(documents[d.docID].originalText); });\n     }\n  }"]},"metadata":{},"sourceType":"module"}